<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cuentas - FinanzApp</title>
    <link rel="stylesheet" href="css/components/header.css">
    <link rel="stylesheet" href="css/components/forms.css">
    <link rel="stylesheet" href="css/components/modals.css">
    <link rel="stylesheet" href="css/pages/accounts.css">
    <link rel="stylesheet" href="css/utilities.css">
    <link rel="stylesheet" href="css/components/navbar.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Navbar Superior -->
    <nav class="navbar">
        <div class="navbar-brand">
            <h1>Finanz<span>App</span></h1>
        </div>
        <div class="navbar-menu">
            <a href="dashboard.html" class="navbar-item">
                <i class="fas fa-home"></i>
                <span>Dashboard</span>
            </a>
            <a href="accounts.html" class="navbar-item active">
                <i class="fas fa-wallet"></i>
                <span>Cuentas</span>
            </a>
            <a href="transactions.html" class="navbar-item">
                <i class="fas fa-exchange-alt"></i>
                <span>Transacciones</span>
            </a>
            <!-- Eliminamos el item de perfil y agregamos el menú hamburguesa -->
            <div class="navbar-hamburger" id="hamburger-menu">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Menú desplegable -->
    <div class="dropdown-menu" id="dropdown-menu">
        <a href="profile.html" class="dropdown-item">
            <i class="fas fa-user"></i>
            <span>Perfil</span>
        </a>
        <button class="dropdown-item" id="logout-btn">
            <i class="fas fa-sign-out-alt"></i>
            <span>Cerrar sesión</span>
        </button>
    </div>

    <!-- Contenido Principal -->
    <main class="accounts-container">
        <!-- Header con título y botón de agregar -->
        <header class="accounts-header">
            <h2>Mis Cuentas</h2>
            <button class="btn btn-primary" id="add-account-btn">
                <i class="fas fa-plus"></i>
                Agregar Cuenta
            </button>
        </header>

        <!-- Lista de cuentas -->
        <section class="accounts-grid" id="accounts-grid">
            <!-- Las cuentas se cargarán dinámicamente aquí -->
            <div class="no-data">
                <i class="fas fa-wallet"></i>
                <p>No tienes cuentas registradas</p>
                <button class="btn btn-primary" id="first-account-btn">Agregar primera cuenta</button>
            </div>
        </section>
    </main>

    <!-- Modal para agregar/editar cuenta -->
    <div class="modal" id="account-modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2 id="modal-title">Agregar Cuenta</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="account-form" autocomplete="off">
                    <input type="hidden" id="account-id">
                    
                    <div class="form-group">
                        <label for="account-name">Nombre de la cuenta</label>
                        <div class="input-with-icon">
                            <i class="fas fa-signature"></i>
                            <input type="text" id="account-name" placeholder="Ej: Cuenta Principal" required autocomplete="off">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="account-balance">Balance inicial</label>
                        <div class="input-with-icon">
                            <i class="fas fa-dollar-sign"></i>
                            <input type="number" id="account-balance" step="0.01" placeholder="0.00" required autocomplete="off">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="account-type">Tipo de cuenta</label>
                        <div class="input-with-icon">
                            <i class="fas fa-wallet"></i>
                            <select id="account-type" required autocomplete="off">
                                <option value="">Selecciona un tipo</option>
                                <option value="bank">Cuenta Bancaria</option>
                                <option value="virtual_wallet">Billetera Virtual</option>
                                <option value="cash">Efectivo</option>
                            </select>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full" id="save-account-btn">
                        Guardar Cuenta
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal de confirmación para eliminar -->
    <div class="modal" id="delete-modal">
        <div class="modal-content small-modal">
            <div class="modal-header">
                <h2>Confirmar Eliminación</h2>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="confirmation-icon">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <p>¿Estás seguro de que deseas eliminar la cuenta <strong id="delete-account-name"></strong>?</p>
                
                <div class="delete-warning">
                    <p><i class="fas fa-exclamation-circle"></i> Esta acción no se puede deshacer.</p>
                </div>
                
                <div class="confirmation-buttons">
                    <button class="btn btn-secondary" id="cancel-delete">Cancelar</button>
                    <button class="btn btn-error" id="confirm-delete">Eliminar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="./js/components/burguer.js"></script>
    <script src="./js/services/utils.js"></script>
    <script src="./js/services/api/api-client.js"></script>
    <script src="./js/pages/accounts.js"></script>
</body>

</html>